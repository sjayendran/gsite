<head>
	<title>Groovit</title>
	<link rel="stylesheet" type="text/css" href="shareBrowser.css">
	<script type="text/javascript" src="youtubePlayer.js"></script>
	<!--<script type="text/javascript">		
		function playVideo() {
			var yt = document.getElementById("sharePlayer");
			yt.playVideo();            
		}
	</script>-->
</head>

<body>
	{{> header}}
	{{> bodyContent}}
</body>

<template name="bodyContent">
	<div class="container">
	{{#if currentUser}}
		{{#if fbImportDone}}
			<div id="currentShare" style="float:left;">
				{{> chosenShare}}
			</div>
			<div id="personalList" style="float:right;">
				{{> shareList}}
			</div>
		{{/if}}
	{{else}}
		{{> bodyNotLoggedIn}}
	{{/if}}	
	</div>
	<br>
	DONE!!!
</template>

<!--<template name="friendDetail">
	<li class="span2">
		  <center><img class="img-rounded" style="height: 32px; margin-top: 4px;" src="http://graph.facebook.com/{{id}}/picture" /><p>{{message}}</p></center>
	</li>
	<br>
</template>-->

<template name="shareList">
  <ul class="horizontal-slide">
  <center>
	  {{#each share}}
			{{> shareBrowserItem}}
	  {{/each}}
  </center>
  </ul>
  <a class="reviewHiddenVids" href="#">review hidden links</a>
	{{#if showReviewHiddenLinksDialog}}
		{{> validateProblematicYTLinks}}
	{{/if}}
</template>

<template name="shareBrowserItem">
	<li class="span2">
		<a href="#" class="thumbnail">
		  <img data-src="holder.js/120x150" src="http://img.youtube.com/vi/{{ytimg sl}}/2.jpg" alt="" />
		  <center><p>{{sa}} <br> {{st}}</p></center>
		  {{#if linkIsUnidentifiable _id}}
			  <a class="btn" href="#"><i class="icon-ok icon-black"></i></a>
			  <a class="btn" href="#"><i class="icon-remove icon-black"></i></a>
		  {{/if}}
		</a>
	</li>
</template>

<template name="chosenShare">
<center>
  {{#if share}}
		{{#with share}}
		  <div>{{sa}} - {{st}}
		  <br>
		  <div id="videoDiv" class = "media">
			<!--NOT WORKING PROPER IFRAME VERSION<iframe id="sharePlayer" type="text/html" width="640" height="360" src="{{embed sl}}?version=3&amp;hl=en_US&amp;rel=0&autoplay=1&enablejsapi=1" frameborder="0" allowfullscreen></iframe>-->
			<!--WORKING ORIGINAL VERSION<object id="sharePlayer" width="560" height="315"><param name="movie" value="{{embed sl}}?version=3&amp;hl=en_US&amp;rel=0&autoplay=1&enablejsapi=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed id="actualMediaPlayer" src="{{embed sl}}?version=3&amp;hl=en_US&amp;rel=0&autoplay=1&enablejsapi=1" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object>-->
			<object type="application/x-shockwave-flash" id="sharePlayer" data="{{embed sl}}?version=3&amp;hl=en_US&amp;rel=0&autoplay=1&enablejsapi=1" width="640" height="385"><param name="allowScriptAccess" value="always"/></object>
		  </div>
		  <br>
		  {{dt}}
		  <br>
		  {{msg}}    
		  </div>
		{{/with}}
  {{else}}		
	<h1>NOTHING CHOSEN YET!</h1>
  {{/if}}
</center>
</template>


<template name="header">
	<div class="navbar">
		<div class="navbar-inner">
			<a class="brand" href="#">Groovit</a>
			<div class="container">
				<div class="nav">
					{{> playerControls}}
				</div>
				<div class="nav pull-right">
					{{> user_info}}
				</div>
			</div>
		</div>
	</div>
</template>

<template name="playerControls">
	<li><a id="playButton" href="javascript:// play video" onclick="playVideo();">Play</a></li>
	<li><a id="pauseButton" href="javascript:// pause video" onclick="pauseVideo();">Pause</a></li>
	<li><a id="nextButton" href="javascript:// next video">Next</a></li>
</template>

<template name="user_info">
	<ul class="nav pull-right">
		{{#if currentUser}}
			{{> user_loggedin}}
		{{else}}
			{{> user_loggedout}}
		{{/if}}
	</ul>
</template>

<template name="user_loggedin">
	{{#if loggingIn}}
		<li><a>Logging in...</a></li>
	{{else}}
		{{getLatestPostsFromFB}}
		{{getSharesFromDB}}
		<li>
			<img class="img-rounded" style="height: 32px; margin-top: 4px;" src="http://graph.facebook.com/{{fbid}}/picture" />
			{{loggedinUserFullName}}
		</li>
		<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown">
				
				<b class="caret"></b>
			</a>
			<ul class="dropdown-menu">
				<li><a>Account Settings</a></li>
				<li class="divider"></li>
				<li><a id="logout">Logout</a></li>				
			</ul>
		</li>
	{{/if}}
</template>

<template name="user_loggedout">
	<li><a href="#" id="login">Login with Facebook</a></li>
	<!--<li style="height: 32px; margin-top: 4px;">loginButtons</li>-->
</template>

<template name="bodyNotLoggedIn">
	<div class="hero-unit">
	  <h1>Hello! This is Groovit!</h1>
	  <p>Your social jukebox</p>
	  <p>
		<a class="btn btn-primary btn-large">
		  Learn more
		</a>
	  </p>
	</div>
</template>

<template name="validateProblematicYTLinks">
  <div class="mask" height="100%" width="100%"> 
  <div class="modal" height="800px" width="600px">
    <div class="modal-header">
	  <button type="button" class="close cancel">&times;</button>
      <h3>Review problematic YouTube links</h3>
    </div>

    <div class="modal-body">
	   <ul>	
		   {{#each vid}}
			{{> invalidYTVids}}
		   {{/each}}
	   </ul>
    </div>

    <div class="modal-footer">
      <a href="#" class="btn cancel">Cancel</a>
      <a href="#" class="btn btn-primary save">Done reviewing</a>
    </div>
  </div>
</template>

<template name="invalidYTVids">
	<li class="span2">
		<a href="#" class="thumbnail">
		  <img data-src="holder.js/120x150" src="http://img.youtube.com/vi/{{ytimg sl}}/2.jpg" alt="" />
		  <center><p>{{sa}} <br> {{st}}</p></center>
		  <a class="btn" href="#"><i class="icon-ok icon-black"></i></a>
		  <a class="btn" href="#"><i class="icon-remove icon-black"></i></a>
		</a>
	</li>
</template>
